{"version":3,"sources":["scripts/main.js"],"names":["document","addEventListener","gridSize","grid","Array","from","length","fill","score","updateGrid","i","j","cell","getElementById","innerText","className","addRandomNumber","emptyCells","push","randomCell","Math","floor","random","move","direction","moved","merged","moveCell","di","dj","checkWin","isGameOver","classList","remove","alert","add","e","event","key"],"mappings":"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","file":"main.92b99464.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const gridSize = 4;\n  let grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(0));\n  let score = 0;\n\n  function updateGrid() {\n    for (let i = 0; i < gridSize; i++) {\n      for (let j = 0; j < gridSize; j++) {\n        const cell = document.getElementById(`cell-${i}-${j}`);\n\n        cell.innerText = grid[i][j] !== 0 ? grid[i][j] : '';\n        cell.className = `field-cell field-cell--${grid[i][j]}`;\n      }\n    }\n    document.getElementById('score').innerText = score;\n  }\n\n  function generateRandomNumber() {\n    return Math.random() < 0.9 ? 2 : 4;\n  }\n\n  function addRandomNumber() {\n    const emptyCells = [];\n\n    for (let i = 0; i < gridSize; i++) {\n      for (let j = 0; j < gridSize; j++) {\n        if (grid[i][j] === 0) {\n          emptyCells.push({\n            i, j,\n          });\n        }\n      }\n    }\n\n    if (emptyCells.length > 0) {\n      const randomCell\n        = emptyCells[Math.floor(Math.random() * emptyCells.length)];\n\n      grid[randomCell.i][randomCell.j] = generateRandomNumber();\n    }\n  }\n\n  function isGameOver() {\n    for (let i = 0; i < gridSize; i++) {\n      for (let j = 0; j < gridSize; j++) {\n        if (grid[i][j] === 0) {\n          return false;\n        }\n\n        if ((i + 1 < gridSize && grid[i][j] === grid[i + 1][j])\n          || (j + 1 < gridSize && grid[i][j] === grid[i][j + 1])) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  function checkWin() {\n    for (let i = 0; i < gridSize; i++) {\n      for (let j = 0; j < gridSize; j++) {\n        if (grid[i][j] === 2048) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function move(direction) {\n    let moved = false;\n    const merged = Array.from({ length: gridSize },\n      () => Array(gridSize).fill(false));\n\n    function moveCell(i, j, di, dj) {\n      while (i + di >= 0 && i + di < gridSize\n          && j + dj >= 0 && j + dj < gridSize) {\n        if (grid[i + di][j + dj] === 0) {\n          grid[i + di][j + dj] = grid[i][j];\n          grid[i][j] = 0;\n          // eslint-disable-next-line\n          i += di;\n          // eslint-disable-next-line\n          j += dj;\n          moved = true;\n        } else if (grid[i + di][j + dj] === grid[i][j]\n            && !merged[i + di][j + dj] && !merged[i][j]) {\n          grid[i + di][j + dj] *= 2;\n          score += grid[i + di][j + dj];\n          grid[i][j] = 0;\n          merged[i + di][j + dj] = true;\n          moved = true;\n          break;\n        } else {\n          break;\n        }\n      }\n    }\n\n    if (direction === 'up') {\n      for (let j = 0; j < gridSize; j++) {\n        for (let i = 1; i < gridSize; i++) {\n          if (grid[i][j] !== 0) {\n            moveCell(i, j, -1, 0);\n          }\n        }\n      }\n    } else if (direction === 'down') {\n      for (let j = 0; j < gridSize; j++) {\n        for (let i = gridSize - 2; i >= 0; i--) {\n          if (grid[i][j] !== 0) {\n            moveCell(i, j, 1, 0);\n          }\n        }\n      }\n    } else if (direction === 'left') {\n      for (let i = 0; i < gridSize; i++) {\n        for (let j = 1; j < gridSize; j++) {\n          if (grid[i][j] !== 0) {\n            moveCell(i, j, 0, -1);\n          }\n        }\n      }\n    } else if (direction === 'right') {\n      for (let i = 0; i < gridSize; i++) {\n        for (let j = gridSize - 2; j >= 0; j--) {\n          if (grid[i][j] !== 0) {\n            moveCell(i, j, 0, 1);\n          }\n        }\n      }\n    }\n\n    if (moved) {\n      addRandomNumber();\n      updateGrid();\n\n      if (checkWin()) {\n        alert('Congratulations! You won!');\n        document.getElementById('win-message').classList.remove('hidden');\n      } else if (isGameOver()) {\n        document.getElementById('game-over-message').classList.remove('hidden');\n      }\n    }\n  }\n\n  document.getElementById('start').addEventListener('click', function() {\n    document.getElementById('start-message').classList.add('hidden');\n    document.getElementById('start').classList.add('hidden');\n    document.getElementById('restart').classList.remove('hidden');\n    addRandomNumber();\n    updateGrid();\n  });\n\n  document.getElementById('restart').addEventListener('click', function() {\n    grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(0));\n    score = 0;\n    document.getElementById('win-message').classList.add('hidden');\n    document.getElementById('game-over-message').classList.add('hidden');\n    addRandomNumber();\n    updateGrid();\n  });\n\n  document.addEventListener('keydown', function(e) {\n    if (event.key === 'ArrowUp') {\n      move('up');\n    } else if (event.key === 'ArrowDown') {\n      move('down');\n    } else if (event.key === 'ArrowLeft') {\n      move('left');\n    } else if (event.key === 'ArrowRight') {\n      move('right');\n    }\n  });\n});\n"]}